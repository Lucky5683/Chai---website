<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Chai Wala</title>

  <!-- Custom Font for Logo Title -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');

    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #fef9f4;
      margin: 0;
      padding: 0;
    }

    .header-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: #fff8ec;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .logo-title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-title img {
      height: 60px;
      width: 60px;
    }

    .logo-title h1 {
      font-family: 'Pacifico', cursive;
      font-size: 36px;
      color: #6b3e26;
      margin: 0;
    }

    .cart-btn {
      background-color: #f0a500;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
    }

    .cart-btn:hover {
      background-color: #cc8400;
    }

    #products {
      margin: 20px;
    }

    .product {
      border: 1px solid #ccc;
      border-radius: 10px;
      background-color: white;
      margin: 10px;
      padding: 15px;
      width: 250px;
      box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
    }

    .product:hover {
      transform: scale(1.02);
    }

    .product img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
    }

    .product h3 {
      margin: 10px 0 5px;
    }

    .product p {
      font-size: 14px;
      color: #555;
    }

    .product button {
      background-color: #d2691e;
      color: white;
      border: none;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }

    .product button:hover {
      background-color: #a64b0a;
    }

    .category-title {
      text-align: left;
      margin: 20px 10px 10px;
      font-size: 1.5em;
      color: #4b2c20;
    }

    .category-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      gap: 20px;
      margin-bottom: 30px;
    }

    .view-cart-btn {
      background-color: #007bff;
      color: white;
      padding: 12px 20px;
      margin: 30px auto;
      display: inline-block;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
    }

    .view-cart-btn:hover {
      background-color: #0056b3;
    }

    #toast {
      visibility: hidden;
      min-width: 250px;
      background-color: #323232;
      color: white;
      text-align: center;
      border-radius: 6px;
      padding: 16px;
      position: fixed;
      z-index: 1000;
      left: 50%;
      bottom: 30px;
      transform: translateX(-50%);
      font-size: 16px;
      opacity: 0;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    #toast.show {
      visibility: visible;
      opacity: 1;
    }

    /* üñºÔ∏è Carousel Container */
.carousel-container {
  position: relative;
  width: 100%;
  max-width: 800px;
  margin: 30px auto;
  overflow: hidden;
  background: #fffbe7;
  border: 2px solid #d2691e;
  border-radius: 20px;
  text-align: center;
  padding: 20px;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
}

/* üì∏ Slide Styling */
.carousel-slide {
  display: none;
  transition: opacity 0.5s ease;
}

.carousel-slide.active {
  display: block;
}

/* üÜï Enhanced image styling for better visuals */
.carousel-slide img {
  width: 150px;            /* Increased size */
  height: 150px;
  margin-bottom: 15px;
  border-radius: 15px;     /* Rounded corners for beauty */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Subtle shadow */
  transition: transform 0.3s ease;
}

.carousel-slide img:hover {
  transform: scale(1.05);  /* Slight zoom on hover */
}

/* ‚û°Ô∏è Arrows */
.carousel-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background-color: #ffcc80;
  border: none;
  padding: 10px 15px;
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
  border-radius: 50%;
  color: #4e342e;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.carousel-btn.prev {
  left: 10px;
}

.carousel-btn.next {
  right: 10px;
}

.carousel-btn:hover {
  background-color: #ffe0b2;
}

@media (max-width: 600px) {
  .category-row {
    justify-content: center;
  }

  .product {
    width: 90%;
  }

  /* üÜï Ensure big images on mobile too */
  .carousel-slide img {
    width: 100%;
    max-width: 300px;
    height: auto;
  }
}

/* üîç Search Bar Style in Header */
.search-container {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
  margin-right: 20px;
}

.search-container input {
  padding: 6px 10px;
  border: 2px solid #d2691e;
  border-radius: 20px;
  font-size: 14px;
  outline: none;
}

.search-container button {
  background-color: #ffcc80;
  border: none;
  border-radius: 50%;
  padding: 6px 10px;
  cursor: pointer;
  font-size: 16px;
  transition: background 0.3s;
}

.search-container button:hover {
  background-color: #ffe0b2;
}


/* üìú Recommendations List */
.recommendations-list {
  list-style: none;
  padding: 0;
  margin: 8px 20px 0;
  max-width: 200px;
  background: #fffbe7;
  border: 2px solid #d2691e;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  font-size: 14px;
  z-index: 100;
  position: absolute;
}

.recommendations-list li {
  padding: 6px 10px;
  cursor: pointer;
  border-bottom: 1px solid #f4dcb0;
}

.recommendations-list li:hover {
  background-color: #ffe0b2;
}

.recommendations-list li:last-child {
  border-bottom: none;
}



  </style>
</head>

<body>
  <div class="header-bar">
    <div class="logo-title">
      <img src="https://cdn-icons-png.flaticon.com/512/924/924514.png" alt="Tea Logo" />
      <h1>Dip and Sip</h1>
    </div>
  
<!-- üåü Search Bar and Recommendations Grouped -->
<div class="search-container">
  <input 
    type="text" 
    id="searchInput" 
    placeholder="Search your favourite food..." 
    oninput="showRecommendations()" 
    onkeydown="handleKey(event)" 
  />
  <button onclick="handleSearch()">üîç</button>

  <!-- ‚úÖ Keep only this one -->
  <ul id="recommendations" class="recommendations-list"></ul>
</div>


    <a href="viewcart.html">
        <button>üõí View Cart</button>
    </a>
    


  </div>

  <!-- üçµ Slideshow Carousel -->
  <div class="carousel-container">
    <div class="carousel-slide active">
      <img src="https://i.ibb.co/Jw7fhnTG/cup-traditional-indian-masala-chai-tea-with-ingredients-cinnamon-cardamom-anise-nutmeg-951562-55001.jpg" alt="Today's Special" />
      <p><strong>‚òï Today‚Äôs Special:</strong> Masala Chai with Cardamom</p>
    </div>
    <div class="carousel-slide">
      <img src="https://i.ibb.co/k280jPc2/ginger-chai-12001800.webp" alt="Most Sold" />
      <p><strong>üî• Most Sold:</strong> Ginger Tea - Desi Swag!</p>
    </div>
    <div class="carousel-slide">
      <img src="https://i.ibb.co/Rpk99j6S/Zobo-drink-2.webp" alt="Offer" />
      <p><strong>üéâ Today‚Äôs Special Offer:</strong> Buy 1 Get 1 on ZOOOOBO!!</p>
    </div>

    <!-- Navigation Arrows -->
    <button class="carousel-btn prev" onclick="changeSlide(-1)">‚ü®</button>
    <button class="carousel-btn next" onclick="changeSlide(1)">‚ü©</button>
  </div>
  


  


  <div id="products"></div>
  <div id="toast">ü´ñ Item added to cart!</div>
 
  

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDGqUDYOALXTjyAGEcw4q4XAaSEVCDE3Ag",
      authDomain: "mystore-32f4c.firebaseapp.com",
      projectId: "mystore-32f4c",
      storageBucket: "mystore-32f4c.appspot.com",
      messagingSenderId: "476881423071",
      appId: "1:476881423071:web:11cf122e551a07b842f76a"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const productsDiv = document.getElementById('products');
    const toast = document.getElementById('toast');

    function showToast(message) {
      toast.innerText = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }
    
      function capitalizeWords(str) {
    return str.replace(/\b\w/g, (char) => char.toUpperCase());
  }
    async function getProducts() {
      
     


      const querySnapshot = await getDocs(collection(db, "products"));
      productsDiv.innerHTML = "";

      const categories = {
        "Indian Tea": [],
        "Coffee": [],
        "others": []
      };

      querySnapshot.forEach((doc) => {
        const product = doc.data();
        let category = (product.category || "others").toLowerCase();

      if (category.includes("tea")) category = "Indian Tea";
      else if (category.includes("coffee")) category = "Coffee";
      else category = "others";

        if (!categories[category]) categories[category] = [];
        categories[category].push(product);
      });

      const orderedCategories = ["Indian Tea", "Coffee", "others"];

       for (const category of orderedCategories) {
          if (categories[category].length > 0) {
            const capitalCategory = capitalizeWords(category); // üÜï Capitalize here
           const categoryId = capitalCategory.replace(/\s/g, "-");
          productsDiv.innerHTML += `<h2 class="category-title">${capitalCategory}</h2><div class="category-row" id="${categoryId}"></div>`;

          const rowDiv = document.getElementById(categoryId);

          categories[category].forEach((product) => {
            const productHTML = `
              <div class="product">
                <img src="${product.image}" alt="${product.name}" />
                <h3>${product.name}</h3>
                <p>${product.description}</p>
                <p><strong>‚Çπ${product.price}</strong></p>
                <button onclick='addToCart(${JSON.stringify(product)})'>Add to Cart</button>
              </div>
            `;
            rowDiv.innerHTML += productHTML;
          });
        }
      }
    }

    window.addToCart = function (product) {
      const quantity = prompt(`Enter quantity for ${product.name}:`, "1");
      const qty = parseInt(quantity);

      if (isNaN(qty) || qty <= 0) {
        showToast("‚ùå Invalid quantity!");
        return;
      }

      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      product.quantity = qty;
      cart.push(product);
      localStorage.setItem("cart", JSON.stringify(cart));

      showToast(`ü´ñ ${qty} x ${product.name} added to cart`);
    };

    getProducts();
  </script>

  <script>
  let currentSlide = 0;
  const carouselSlides = document.querySelectorAll(".carousel-slide");

  function showSlide(index) {
    carouselSlides.forEach((slide, i) => {
      slide.classList.remove("active");
    });
    carouselSlides[index].classList.add("active");
  }

  function autoSlide() {
    currentSlide = (currentSlide + 1) % carouselSlides.length;
    showSlide(currentSlide);
  }

  // Show first slide
  showSlide(currentSlide);

  // Auto slide every 5 seconds
  setInterval(autoSlide, 5000);
</script>


<script>
  function handleSearch() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    const products = document.querySelectorAll(".product");
    let found = false;

    products.forEach((product) => {
      const name = product.querySelector("h3").innerText.toLowerCase();
      const desc = product.querySelector("p").innerText.toLowerCase();
      const match = name.includes(query) || desc.includes(query);
      product.style.display = match ? "block" : "none";
      if (match) found = true;
    });

    document.getElementById("recommendations").style.display = "none";

    if (!found && query) {
      alert("No matching items found.");
    }
  }

  function showRecommendations() {
    const input = document.getElementById("searchInput").value.toLowerCase();
    const recommendationsBox = document.getElementById("recommendations");
    const products = document.querySelectorAll(".product");

    recommendationsBox.innerHTML = "";

    if (!input) {
      recommendationsBox.style.display = "none";
      return;
    }

    let matches = [];

    products.forEach((product) => {
      const name = product.querySelector("h3").innerText;
      if (name.toLowerCase().includes(input)) {
        matches.push(name);
      }
    });

    if (matches.length > 0) {
      matches.forEach((item) => {
        const li = document.createElement("li");
        li.textContent = item;
        li.onclick = () => {
          document.getElementById("searchInput").value = item;
          recommendationsBox.style.display = "none";
          handleSearch();
        };
        recommendationsBox.appendChild(li);
      });
      recommendationsBox.style.display = "block";
    } else {
      recommendationsBox.style.display = "none";
    }
  }
  function handleKey(event) {
    if (event.key === "Enter") {
      handleSearch();
    }
  }

  // Hide on click outside
  window.addEventListener("click", function (e) {
    if (!e.target.closest(".search-container")) {
      document.getElementById("recommendations").style.display = "none";
    }
  });
</script>

<script>
  searchInput.addEventListener("keydown", handleKey);  // <- ADD THIS LINE

  const recommendationsBox = document.getElementById("recommendations");

  searchInput.addEventListener("input", showRecommendations);

  function handleSearch() {
    const query = searchInput.value.toLowerCase();
    const products = document.querySelectorAll(".product");
    let found = false;

    products.forEach((product) => {
      const name = product.querySelector("h3").innerText.toLowerCase();
      const desc = product.querySelector("p").innerText.toLowerCase();
      const match = name.includes(query) || desc.includes(query);
      product.style.display = match ? "block" : "none";
      if (match) found = true;
    });

    recommendationsBox.style.display = "none";

    if (!found && query) {
      alert("No matching items found.");
    }
  }

  function showRecommendations() {
    const input = searchInput.value.toLowerCase();
    const products = document.querySelectorAll(".product");

    recommendationsBox.innerHTML = "";

    if (!input) {
      recommendationsBox.style.display = "none";
      return;
    }

    let matches = [];

    products.forEach((product) => {
      const name = product.querySelector("h3").innerText;
      if (name.toLowerCase().includes(input)) {
        matches.push(name);
      }
    });

    if (matches.length > 0) {
      matches.forEach((item) => {
        const li = document.createElement("li");
        li.textContent = item;
        li.onclick = () => {
          searchInput.value = item;
          recommendationsBox.style.display = "none";
          handleSearch();
        };
        recommendationsBox.appendChild(li);
      });
      recommendationsBox.style.display = "block";
    } else {
      recommendationsBox.style.display = "none";
    }
  }

  // Hide recommendations when clicking outside
  window.addEventListener("click", function (e) {
    if (!e.target.closest(".search-container")) {
      recommendationsBox.style.display = "none";
    }
  });
</script>



</body>
</html>
